/**
 * Package: Mivhak Syntax Highlighter
 * Version: 1.3.2
 * Date: 2015-12-25
 */
!function(a){function b(b,c){var d=this;this.config=a.extend({},this.defaults(),c),""!==this.config.auto_assign&&a(b).find(this.config.auto_assign).each(function(){return a(this).parent().is("pre")?void(this.hasAttribute("class")&&a(this).parent().addClass("lang-"+a(this).attr("class"))):void a(this).addClass("prettyprint")}),a(".prettyprint").each(function(){d.prettify(this)})}a.fn.extend({mivhak:function(a){return this.each(function(){new b(this,a)})}}),b.prototype.prettify=function(b){if("CODE"!==b.tagName){var c=this.config,d=this.getLang(b),e=parseInt(b.getAttribute("data-start-line"))||1,f=b.getAttribute("data-visibility"),g=b.getAttribute("data-highlight"),h=b.getAttribute("data-caption"),i=a("<div>").addClass("mivhak-code-wrapper"),j=ace.edit(b);if(c.line_numbers||(j.renderer.setShowGutter(!1),j.getSession().on("changeScrollLeft",function(){j.getSession().setScrollLeft(0)})),i=a(b).wrap(i).parent(),"hidden"===f){var k=a("<div>").addClass("mivhak-visibility-toggle").text("Show Code").click(function(){var c=a(b).outerHeight()+30;i.toggleClass("mivhak-hidden").css({height:c+"px"})});i.append(k).addClass("mivhak-hidden")}c.show_meta&&j.session.getLength()>=c.min_lines&&a(b).before(this.buildHeader(b,j,d)),null!==h&&""!==h&&a(b).after(a("<div></div>").addClass("caption-text").text(h)),null!==g&&""!==g&&this.highlightLines(j,g),ace.config.set("basePath","https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.2/"),j.setReadOnly(!0),j.setTheme("ace/theme/"+c.theme),j.getSession().setMode("ace/mode/"+d),j.getSession().setUseWorker(!1),j.setOptions({maxLines:1/0,firstLineNumber:e,highlightActiveLine:!1,fontSize:parseInt(c.font_size)})}},b.prototype.defaults=function(){return{auto_assign:!1,show_meta:!1,line_numbers:!1,min_lines:2,font_size:12,theme:"twilight",default_lang:"text",lang_list:{}}},b.prototype.buttons=function(){return[{description:"Copy this code to clipboard","class":"mivhak-icon copy-icon",func:function(b,c){a(c).hasClass("active")?b.selection.clearSelection():(b.selection.selectAll(),b.focus()),a(c).toggleClass("active")}},{description:"Open this code in a new window","class":"mivhak-icon expand-icon",func:function(b){var c=window.open("","","width=500,height=330,resizable=1");b.selection.selectAll();var d=b.session.getTextRange(b.getSelectionRange());c.document.write("<pre>"+a("<div/>").text(d).html()+"</pre>"),b.selection.clearSelection()}},{description:"Wrap lines","class":"mivhak-icon wrap-icon",func:function(b,c){b.getSession().setUseWrapMode(a(c).hasClass("active")?!1:!0),a(c).toggleClass("active")}}]},b.prototype.buildHeader=function(b,c){var d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=this.getLang(b);return d.className="meta",e.className="text",f.className="control",g.className="lang",null!==h&&(a(g).html(this.config.lang_list[h]),a(d).append(g)),a(f).append(this.generateButtons(c)),a(e).html(c.session.getLength()+" Lines"),a(d).append(e,f),d},b.prototype.generateButtons=function(b){var c=[];return a.each(this.buttons(),function(){var d=document.createElement("div"),e=document.createElement("i"),f=this.func;e.className=this.class,d.title=this.description,d.appendChild(e),a(d).click(function(){f(b,d)}),c.push(d)}),c},b.prototype.getLang=function(a){var b=a.className.match(/lang-([^ ]+)/g);return null===b?""!==this.config.default_lang?this.config.default_lang:null:b[0].split("-")[1]},b.prototype.highlightLines=function(b,c){var d=ace.require("ace/range").Range;c=c.replace(" ",""),a(c.split(",")).each(function(){var a,c;this.indexOf("-")>-1?(a=parseInt(this.split("-")[0])-1,c=parseInt(this.split("-")[1])-1):(a=parseInt(this)-1,c=a),b.session.addMarker(new d(a,0,c,1),"ace_active-line","fullLine")})},a(document).mivhak(mivhak_settings)}(window.jQuery);